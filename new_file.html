<!DOCTYPE html>
<html>
	<head>
		<meta charset="utf-8" />
		<title>长城一站式解冻平台</title>
		<meta name="viewport" content="width=device-width,initial-scale=1.0,maximum-scale=1.0,minimum-scale=1.0,user-scalable=no">
		<meta name="format-detection" content="telephone=yes"/>
		<script src="js/vue.js" type="text/javascript" charset="utf-8"></script>
		<!-- <script src="js/index.js" type="text/javascript" charset="utf-8"></script> -->
		<script src="http://cdn.suoluomei.com/common/js2.0/axios/axios.min.js"></script>
		<script src="js/md5.js" type="text/javascript" charset="utf-8"></script>
		<script src="js/sha1.js" type="text/javascript" charset="utf-8"></script>
		
	</head>
	<style type="text/css">
		*{
			padding: 0;
			margin: 0;
		}
		#app{
			width: 100%;
			height: 100%;
		}
		#bj{
			width: 100%;
			height: 26rem;
			background: url(img/image_bg_all.jpg) no-repeat;
			background-size: 100% 100%;
			margin-bottom: .49rem;
		}
		#kf{
			    position: fixed;
			    top: 55%;
			    left: 83%;
			    width: .65rem;
			    height: .65rem;
			    background-color: black;
			    z-index: 1001;
			    filter: alpha(opacity=88);
			    background: url(img/image_kefu.png)no-repeat;
			    background-size: 100% 100%;
		}
		#pho{
			position: fixed;
			background: green;
			background: url(img/image_btn_call.png)no-repeat;
			 background-size: 100% 100%;
			bottom: 0;
			width: 100%;
			
			height: .6rem!important;
			text-align: center;
			line-height: .6rem;
			color: #AB977B;
			font-size: .18rem;
			
		}
		#pho p{
			
		}
		a{
			text-decoration:none;
		}
		.polling{
			font-size: .14rem;
			padding-top: 5.3rem;
			/* height: 4rem; */
			color: #fff;
		}
		li{
			line-height: 0.3rem;
			height: 0.3rem;
			width: 100%;
			display: flex;
			justify-content: space-evenly;
			align-items: center;
		}
		
		/* 电脑端样式 */
		::-webkit-scrollbar{display: none;}
		.actives{
			margin:5% auto;
			width: 22%!important;
			height: 5.67rem!important;
			overflow:scroll;
			background: #011d42;
		}
		.active{
			width: 100%;
			height: 26rem!important;
			position: relative;
			margin-bottom: -.1rem!important;
		}
		.activekf{
			float: right;
			left:58%!important;
			margin: auto;
			width: .55rem!important;
			height: .55rem!important;
		}
		.activepoll{
			   padding-top: 5.3rem!important;
			 
			}
		.activepho{
			position: fixed!important;
			width: 100%!important;
			margin: auto;
			top:67.2%!important;
			height: .6rem!important;
			color: #AB977B;
			font-size: .16rem!important;
		}
		.clearpos{
			position: static!important;
		}
	</style>
	<script type="text/javascript">
		(function(doc, win) {
		var docEl = doc.documentElement,
		resizeEvt = 'orientationchange' in window ? 'orientationchange' : 'resize',
		recalc = function() {
		var clientWidth = docEl.clientWidth;
		if (!clientWidth) return;
		if(clientWidth <= 750){
		docEl.style.fontSize = '100px';
		}else{
		docEl.style.fontSize = 50 * (clientWidth / 750) + 'px';
		}
		};
		if (!doc.addEventListener) return;
		win.addEventListener(resizeEvt, recalc, false);
		doc.addEventListener('DOMContentLoaded', recalc, false);
		})(document, window);
		
	</script>
	<body>
		<div id="app">
			<div :class="{ actives: isActives }">
				<div id="bj"  :class="{ active: isActive }">
						<ul class="polling"  :class="{ activepoll: isactivepoll }">						
							<marquee direction=up scrollamount="1" style=" height: 1.5rem;">
								<li v-for="(item,index) in list" :key="index">
									<!-- <p> {{item.name | ellipsis}}</p><p>{{item.phone | mobileFilter}}</p><p>{{item.time}}</p> -->
									  <p>{{ item.id}}</p><p>{{item.desc}}</p>
								</li>
						   </marquee>
						</ul>
						
					<div id="kf"   :class="{ activekf: isactivekf }">
					   <a :href="url" style="color: transparent;">url</a>
				     </div>
				</div> 
					 <a :href="'tel:' + tel">
						 <div id="pho"  :class="{ activepho: isactivepho,clearpos: isclearpos }">
							
						 </div> 
					</a>
				
				
			 </div>
		</div>
	</body>
	<script type="text/javascript">
			 new Vue({
			         el: '#app',
			         data: function () {
			             return { 
							 isActive:false,
							 isActives:false,
							 isactivepho:false,
							 isactivekf:false,
							 isclearpos:false,
							 isactivepoll:false,
							 app_id:"adminApi",
							 app_key : "adminApi20200915",	 
							 list:[ ],
							 tel:"",
							 url:'',
							 time:"",
							 token_:""
						 }
			         },
					 created() {
					 },
			          
			             mounted() {
			              	var ts = Math.round(new Date().getTime()/1000).toString();
							this.time = ts;
							var s="app_id"+"="+"adminApi"+"&"+"app_time"+"="+ts
							var token_ = hex_md5(sha1(s)+this.app_key)
							this.token_ = token_;
							   axios.defaults.baseURL='http://192.168.3.49:81/api.php/cc/'
							axios.post("getBanner",{
										app_id: this.app_id,
										app_time:ts,
										app_key: this.app_key,
										token:token_,
							 }).then(res =>{
								 this.list = res.data.data.data.list;
							 })
							 axios.post("getKefu",{
										app_id: this.app_id,
										app_time:ts,
										app_key: this.app_key,
										token:token_,
							 }).then(res =>{
								  this.tel = res.data.data.data.list.tel;
								 this.url = res.data.data.data.list.kefu_url;
							 });
							 	this.wid()
			             },
					 methods:{
						wid(){
							 if ((navigator.userAgent.match(/(phone|pad|pod|iPhone|iPod|ios|iPad|Android|Mobile|BlackBerry|IEMobile|MQQBrowser|JUC|Fennec|wOSBrowser|BrowserNG|WebOS|Symbian|Windows Phone)/i))) {
						
							   this.isActives = false
							   this.isActive = false
								this.isactivekf = false
							   this.isactivepho = false
							   this.isclearpos = false
							   this.isactivepoll = false
							 }else{
								 setTimeout(()=>{
									 this.isActives = true
									 this.isactivekf = true
									 this.isActive = true
									 this.isactivepho = true
									 this.isclearpos = true
									 this.isactivepoll = true
								  },100) 
							
							 }
						}
						},
						filters: {
						      ellipsis (value) {
						        if (!value) return ''
						        if (value.length > 1) {
						          return value.slice(0,1) + '**'
						        }
						        return value
						      },
							mobileFilter(val){
							      let reg = /^(.{3}).*(.{4})$/
							      return val.toString().replace(reg,'$1****$2')
							    }
						    },
			})
		</script>
</html>
